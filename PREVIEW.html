<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KY Wash - Interactive Preview</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse-ring {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }
        .pulse-ring {
            animation: pulse-ring 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app"></div>

    <script>
        // Simple state management
        let currentView = 'login';
        let isDark = false;
        let currentUser = null;
        let activeTab = 'machines';
        
        // Sample data
        const machines = [
            { id: 'W1', type: 'washer', status: 'available', noOneReports: [], machinesDoneReports: [] },
            { id: 'W2', type: 'washer', status: 'in-use', user: 'S001', phone: '0123456789', mode: 'normal', timeRemaining: 45, noOneReports: ['S005'], machinesDoneReports: [] },
            { id: 'W3', type: 'washer', status: 'available', noOneReports: [], machinesDoneReports: [] },
            { id: 'W4', type: 'washer', status: 'maintenance', noOneReports: [], machinesDoneReports: [] },
            { id: 'W5', type: 'washer', status: 'available', noOneReports: [], machinesDoneReports: [] },
            { id: 'W6', type: 'washer', status: 'in-use', user: 'S002', phone: '0987654321', mode: 'extra', timeRemaining: 1230, notificationState: 'completed', noOneReports: [], machinesDoneReports: ['S007'] },
            { id: 'D1', type: 'dryer', status: 'available', noOneReports: [], machinesDoneReports: [] },
            { id: 'D2', type: 'dryer', status: 'in-use', user: 'S003', phone: '0111222333', mode: 'normal', timeRemaining: 20, noOneReports: [], machinesDoneReports: [] },
            { id: 'D3', type: 'dryer', status: 'available', noOneReports: [], machinesDoneReports: [] },
            { id: 'D4', type: 'dryer', status: 'available', noOneReports: [], machinesDoneReports: [] },
            { id: 'D5', type: 'dryer', status: 'available', noOneReports: [], machinesDoneReports: [] },
            { id: 'D6', type: 'dryer', status: 'available', noOneReports: [], machinesDoneReports: [] }
        ];

        const washerWaitlist = ['S005', 'S006'];
        const dryerWaitlist = ['S007'];

        const usageHistory = [
            { date: '2026-01-29', day: 'Thursday', time: '14:30', studentId: 'S001', type: 'washer', machineId: 'W1', mode: 'normal', duration: 1, spending: 5, status: 'completed' },
            { date: '2026-01-29', day: 'Thursday', time: '13:15', studentId: 'S001', type: 'dryer', machineId: 'D2', mode: 'extra', duration: 40, spending: 6, status: 'completed' },
            { date: '2026-01-28', day: 'Wednesday', time: '09:20', studentId: 'S001', type: 'washer', machineId: 'W3', mode: 'normal', duration: 1, spending: 5, status: 'completed' }
        ];

        // Render functions
        function render() {
            const app = document.getElementById('app');
            
            if (currentView === 'login') {
                app.innerHTML = renderLogin();
            } else if (currentView === 'dashboard') {
                app.innerHTML = renderDashboard();
            } else if (currentView === 'admin') {
                app.innerHTML = renderAdmin();
            }
            
            attachEventListeners();
        }

        function renderLogin() {
            return `
                <div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4">
                    <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
                        <div class="text-center mb-8">
                            <h1 class="text-4xl font-bold text-indigo-600 mb-2">KY Wash</h1>
                            <p class="text-gray-600">Smart Laundry Management System</p>
                            <p class="text-sm text-gray-500 mt-2">üì± Interactive Preview Demo</p>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Student ID</label>
                                <input type="text" id="studentId" value="DEMO001" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"
                                    placeholder="Enter your student ID">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                                <input type="tel" id="phoneNumber" value="0123456789"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"
                                    placeholder="Enter your phone number">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                                <input type="password" id="password" value="demo123"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"
                                    placeholder="Enter your password">
                            </div>

                            <button onclick="handleLogin()" 
                                class="w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition-all transform hover:scale-[1.02]">
                                Login (Demo)
                            </button>

                            <div class="relative my-6">
                                <div class="absolute inset-0 flex items-center">
                                    <div class="w-full border-t border-gray-300"></div>
                                </div>
                                <div class="relative flex justify-center text-sm">
                                    <span class="px-2 bg-white text-gray-500">or</span>
                                </div>
                            </div>

                            <button onclick="handleAdminLogin()"
                                class="w-full bg-gray-100 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-200 transition-all">
                                Admin Login (Password: JJ1234#)
                            </button>
                        </div>

                        <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                            <p class="text-sm text-blue-800">
                                <strong>‚ÑπÔ∏è Preview Mode:</strong> This is an interactive demo. Click Login to explore the features!
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderDashboard() {
            return `
                <div class="${isDark ? 'dark' : ''}">
                    <div class="min-h-screen bg-gray-50 dark:bg-gray-900">
                        <!-- Header -->
                        <header class="bg-white dark:bg-gray-800 shadow-sm">
                            <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
                                <div>
                                    <h1 class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">KY Wash</h1>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Welcome, DEMO001</p>
                                </div>
                                <div class="flex items-center gap-3">
                                    <button onclick="toggleTheme()" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                                        ${isDark ? '‚òÄÔ∏è' : 'üåô'}
                                    </button>
                                    <button onclick="handleLogout()" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
                                        Logout
                                    </button>
                                </div>
                            </div>
                        </header>

                        <!-- Navigation -->
                        <nav class="bg-white dark:bg-gray-800 border-b dark:border-gray-700">
                            <div class="max-w-7xl mx-auto px-4">
                                <div class="flex space-x-1 overflow-x-auto">
                                    ${['machines', 'history', 'washer-stats', 'dryer-stats', 'profile', 'feedback', 'guide'].map(tab => `
                                        <button onclick="setActiveTab('${tab}')" 
                                            class="px-4 py-3 border-b-2 whitespace-nowrap ${activeTab === tab ? 'border-indigo-600 text-indigo-600' : 'border-transparent text-gray-600 hover:text-gray-900'}">
                                            ${tab.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ')}
                                        </button>
                                    `).join('')}
                                </div>
                            </div>
                        </nav>

                        <!-- Content -->
                        <main class="max-w-7xl mx-auto px-4 py-6">
                            ${activeTab === 'machines' ? renderMachinesTab() : ''}
                            ${activeTab === 'history' ? renderHistoryTab() : ''}
                            ${activeTab === 'washer-stats' ? renderStatsTab('Washer') : ''}
                            ${activeTab === 'dryer-stats' ? renderStatsTab('Dryer') : ''}
                            ${activeTab === 'profile' ? renderProfileTab() : ''}
                            ${activeTab === 'feedback' ? renderFeedbackTab() : ''}
                            ${activeTab === 'guide' ? renderGuideTab() : ''}
                        </main>

                        <!-- Chat Button -->
                        <button class="fixed bottom-6 right-6 bg-indigo-600 text-white p-4 rounded-full shadow-lg hover:bg-indigo-700 z-50">
                            üí¨
                        </button>
                    </div>
                </div>
            `;
        }

        function renderMachinesTab() {
            return `
                <div class="space-y-6">
                    <!-- Waitlists -->
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                            <h3 class="text-lg font-semibold mb-4 dark:text-white">üë• Washer Waitlist (${washerWaitlist.length})</h3>
                            <div class="space-y-2 mb-4">
                                ${washerWaitlist.map(id => `<div class="bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded dark:text-white">${id}</div>`).join('')}
                            </div>
                            <button class="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700">
                                Join Waitlist
                            </button>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                            <h3 class="text-lg font-semibold mb-4 dark:text-white">üë• Dryer Waitlist (${dryerWaitlist.length})</h3>
                            <div class="space-y-2 mb-4">
                                ${dryerWaitlist.map(id => `<div class="bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded dark:text-white">${id}</div>`).join('')}
                            </div>
                            <button class="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700">
                                Join Waitlist
                            </button>
                        </div>
                    </div>

                    <!-- Washers -->
                    <div>
                        <h2 class="text-2xl font-bold mb-4 dark:text-white">Washers</h2>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                            ${machines.filter(m => m.type === 'washer').map(m => renderMachineCard(m)).join('')}
                        </div>
                    </div>

                    <!-- Dryers -->
                    <div>
                        <h2 class="text-2xl font-bold mb-4 dark:text-white">Dryers</h2>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                            ${machines.filter(m => m.type === 'dryer').map(m => renderMachineCard(m)).join('')}
                        </div>
                    </div>

                    <!-- Report Issue -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                        <h3 class="text-lg font-semibold mb-4 dark:text-white">‚ö†Ô∏è Report Issue</h3>
                        <div class="space-y-4">
                            <select class="w-full px-3 py-2 border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                                <option>Select Machine</option>
                                ${machines.map(m => `<option>${m.id} - ${m.type}</option>`).join('')}
                            </select>
                            <textarea placeholder="Describe the issue..." 
                                class="w-full px-3 py-2 border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white h-24"></textarea>
                            <button class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700">
                                Submit Report
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMachineCard(machine) {
            const statusColors = {
                available: 'border-green-500',
                'in-use': 'border-yellow-500',
                maintenance: 'border-red-500'
            };

            const statusBadgeColors = {
                available: 'bg-green-100 text-green-800',
                'in-use': 'bg-yellow-100 text-yellow-800',
                maintenance: 'bg-red-100 text-red-800'
            };

            return `
                <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border-2 ${statusColors[machine.status]}">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-bold dark:text-white">${machine.id}</h3>
                        <span class="px-3 py-1 rounded-full text-xs font-semibold ${statusBadgeColors[machine.status]}">
                            ${machine.status === 'maintenance' ? 'Under Maintenance' : machine.status}
                        </span>
                    </div>

                    ${machine.status === 'in-use' ? `
                        <div class="space-y-2 mb-4">
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600 dark:text-gray-400">Student ID:</span>
                                <span class="font-semibold dark:text-white">${machine.user}</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600 dark:text-gray-400">Phone:</span>
                                <span class="font-semibold dark:text-white">${machine.phone}</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600 dark:text-gray-400">Mode:</span>
                                <span class="font-semibold dark:text-white">${machine.mode === 'normal' ? 'Normal (1 min)' : 'Extra (40 min)'}</span>
                            </div>
                        </div>
                        <div class="bg-indigo-50 dark:bg-indigo-900 rounded-lg p-4 mb-4">
                            <div class="text-center text-3xl font-bold text-indigo-600 dark:text-indigo-300">
                                ‚è±Ô∏è ${Math.floor(machine.timeRemaining / 60)}:${(machine.timeRemaining % 60).toString().padStart(2, '0')}
                            </div>
                        </div>
                        ${machine.user !== 'DEMO001' && !machine.notificationState ? `
                            <div class="space-y-2 pt-4 border-t dark:border-gray-700">
                                <button class="w-full bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600 text-sm flex items-center justify-center gap-2">
                                    ‚ö†Ô∏è Report No One
                                </button>
                                ${machine.noOneReports && machine.noOneReports.length > 0 ? `
                                    <p class="text-xs text-gray-600 dark:text-gray-400 text-center">
                                        ${machine.noOneReports.length}/2 reports (need 2 to reset)
                                    </p>
                                ` : ''}
                            </div>
                        ` : ''}
                        ${machine.user !== 'DEMO001' && machine.notificationState === 'completed' ? `
                            <div class="space-y-2 pt-4 border-t dark:border-gray-700">
                                <div class="bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 px-3 py-2 rounded-lg text-center text-sm mb-2">
                                    Cycle Completed
                                </div>
                                <button class="w-full bg-red-500 text-white py-2 rounded-lg hover:bg-red-600 text-sm flex items-center justify-center gap-2">
                                    ‚ö†Ô∏è Report Machine is Done
                                </button>
                                ${machine.machinesDoneReports && machine.machinesDoneReports.length > 0 ? `
                                    <p class="text-xs text-gray-600 dark:text-gray-400 text-center">
                                        Reported by ${machine.machinesDoneReports.length} user(s)
                                    </p>
                                ` : ''}
                            </div>
                        ` : ''}
                    ` : ''}

                    ${machine.status === 'available' ? `
                        <button class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 font-semibold">
                            Start Machine
                        </button>
                    ` : ''}
                </div>
            `;
        }

        function renderHistoryTab() {
            const totalSpending = usageHistory.reduce((sum, h) => sum + h.spending, 0);
            
            return `
                <div class="space-y-6">
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                            <h3 class="text-sm text-gray-600 dark:text-gray-400 mb-2">Total Spending</h3>
                            <p class="text-3xl font-bold text-indigo-600">RM ${totalSpending.toFixed(2)}</p>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                            <h3 class="text-sm text-gray-600 dark:text-gray-400 mb-2">Total Uses</h3>
                            <p class="text-3xl font-bold text-blue-600">${usageHistory.length}</p>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                            <h3 class="text-sm text-gray-600 dark:text-gray-400 mb-2">This Month</h3>
                            <p class="text-3xl font-bold text-green-600">${usageHistory.filter(h => h.date.includes('2026-01')).length}</p>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden">
                        <div class="p-6">
                            <h3 class="text-xl font-semibold dark:text-white">Usage History</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Machine</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Mode</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Duration</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Spending</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Status</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Date</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                    ${usageHistory.map(h => `
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm dark:text-white">${h.machineId}</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm dark:text-white capitalize">${h.mode}</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm dark:text-white">${h.duration} min</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm dark:text-white">RM ${h.spending.toFixed(2)}</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="px-2 py-1 rounded-full text-xs bg-green-100 text-green-800">
                                                    ${h.status}
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm dark:text-white">${h.date}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderStatsTab(type) {
            return `
                <div class="space-y-6">
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                            <h3 class="text-sm text-gray-600 dark:text-gray-400 mb-2">Total ${type} Uses</h3>
                            <p class="text-3xl font-bold text-blue-600">3</p>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                            <h3 class="text-sm text-gray-600 dark:text-gray-400 mb-2">Total Minutes</h3>
                            <p class="text-3xl font-bold text-purple-600">42</p>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                            <h3 class="text-sm text-gray-600 dark:text-gray-400 mb-2">Average Duration</h3>
                            <p class="text-3xl font-bold text-green-600">14 min</p>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                        <h3 class="text-xl font-semibold mb-4 dark:text-white">Pattern Analysis</h3>
                        <p class="text-gray-700 dark:text-gray-300">
                            Based on your usage history, you typically use ${type.toLowerCase()}s in <strong>14 minute</strong> cycles.
                            You're a regular user! Consider planning your laundry during off-peak hours.
                        </p>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                        <h3 class="text-xl font-semibold mb-4 dark:text-white">System-Wide Trends</h3>
                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                            Best times to ${type === 'Washer' ? 'wash' : 'dry'}: Early mornings (6-8 AM) and late evenings (10 PM - 12 AM) typically have lower usage.
                        </p>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                        <h3 class="text-xl font-semibold mb-4 dark:text-white">Weekly Usage (All Users)</h3>
                        <div class="space-y-3">
                            ${['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'].map((day, i) => {
                                const usage = Math.floor(Math.random() * 20) + 5;
                                return `
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium dark:text-white">${day}</span>
                                            <span class="text-sm font-medium dark:text-white">${usage} uses</span>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
                                            <div class="bg-blue-600 h-2.5 rounded-full" style="width: ${usage * 4}%"></div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        function renderProfileTab() {
            return `
                <div class="max-w-2xl mx-auto">
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                        <h2 class="text-2xl font-bold mb-6 dark:text-white">Edit Profile</h2>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Student ID</label>
                                <input type="text" value="DEMO001" class="w-full px-4 py-3 border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Phone Number</label>
                                <input type="tel" value="0123456789" class="w-full px-4 py-3 border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">New Password</label>
                                <input type="password" placeholder="Leave blank to keep current" class="w-full px-4 py-3 border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Confirm Password</label>
                                <input type="password" class="w-full px-4 py-3 border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                            </div>
                            <button class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 font-semibold">
                                Update Profile
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderFeedbackTab() {
            return `
                <div class="space-y-6">
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                        <h2 class="text-2xl font-bold mb-6 dark:text-white">Submit Feedback</h2>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Rating</label>
                                <div class="flex gap-2">
                                    ${[1,2,3,4,5].map(n => `<button class="text-3xl text-yellow-400">‚òÖ</button>`).join('')}
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Your Feedback</label>
                                <textarea placeholder="Share your thoughts..." class="w-full px-4 py-3 border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white h-32"></textarea>
                            </div>
                            <button class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 font-semibold">
                                Submit Feedback
                            </button>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                        <h2 class="text-2xl font-bold mb-6 dark:text-white">Meet Our Team</h2>
                        <p class="text-gray-600 dark:text-gray-400">Team members will appear here once added by editors.</p>
                    </div>
                </div>
            `;
        }

        function renderGuideTab() {
            return `
                <div class="max-w-4xl mx-auto">
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-8 shadow-sm">
                        <h1 class="text-3xl font-bold mb-6 dark:text-white">KY Wash ‚Äì User Guide</h1>
                        <p class="text-gray-700 dark:text-gray-300 mb-6">First time using KY Wash? Follow the steps below to get started!</p>

                        <div class="space-y-6">
                            <section>
                                <h2 class="text-xl font-semibold mb-3 dark:text-white">1. Starting a Washer or Dryer</h2>
                                <ul class="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300 ml-4">
                                    <li>‚úì Select the Start button on the washer or dryer you want to use.</li>
                                    <li>‚úì Other users will be able to see that the machine is running.</li>
                                    <li>‚ö†Ô∏è Please only press Start if you are actually using the machine.</li>
                                </ul>
                            </section>

                            <section>
                                <h2 class="text-xl font-semibold mb-3 dark:text-white">2. Joining the Waitlist</h2>
                                <p class="text-gray-700 dark:text-gray-300 mb-3">If all machines are in use, you may choose to Join the Waitlist.</p>
                                <div class="bg-blue-50 dark:bg-blue-900 border-l-4 border-blue-500 p-4">
                                    <p class="text-sm text-blue-900 dark:text-blue-200"><strong>‚ÑπÔ∏è Important:</strong></p>
                                    <ul class="list-disc list-inside space-y-1 text-sm text-blue-800 dark:text-blue-300 ml-4 mt-2">
                                        <li>‚Ä¢ The waitlist is not a queue</li>
                                        <li>‚Ä¢ It does not reserve a machine or guarantee turn order</li>
                                        <li>‚Ä¢ Machines are available on a first-come, first-served basis in real life</li>
                                    </ul>
                                </div>
                            </section>

                            <section>
                                <h2 class="text-xl font-semibold mb-3 dark:text-white">3. Collecting Your Clothes</h2>
                                <ul class="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300 ml-4">
                                    <li>‚úì Remove your laundry promptly.</li>
                                    <li>‚úì Select "Clothes Collected" on the webapp.</li>
                                    <li>‚úì This updates the machine status for other users.</li>
                                </ul>
                            </section>

                            <section>
                                <h2 class="text-xl font-semibold mb-3 dark:text-white">4. Additional Features</h2>
                                <p class="text-gray-700 dark:text-gray-300">‚è±Ô∏è All timers count down accurately from the moment you start a machine.</p>
                            </section>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderAdmin() {
            return `
                <div class="${isDark ? 'dark' : ''}">
                    <div class="min-h-screen bg-gray-50 dark:bg-gray-900">
                        <header class="bg-white dark:bg-gray-800 shadow-sm">
                            <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
                                <div>
                                    <h1 class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">KY Wash Admin</h1>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Administrator Dashboard (Preview)</p>
                                </div>
                                <div class="flex items-center gap-3">
                                    <button onclick="toggleTheme()" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                                        ${isDark ? '‚òÄÔ∏è' : 'üåô'}
                                    </button>
                                    <button onclick="handleLogout()" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
                                        Return to Login
                                    </button>
                                </div>
                            </div>
                        </header>

                        <main class="max-w-7xl mx-auto px-4 py-6 space-y-6">
                            <!-- Machine Lock Control -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6">
                                <h2 class="text-xl font-bold mb-4 dark:text-white">Machine Lock Control</h2>
                                <div class="grid md:grid-cols-4 gap-4">
                                    ${machines.slice(0, 8).map(m => `
                                        <div class="border dark:border-gray-700 rounded-lg p-4">
                                            <div class="flex items-center justify-between mb-3">
                                                <span class="font-semibold dark:text-white">${m.id}</span>
                                                <span class="px-2 py-1 rounded-full text-xs ${m.status === 'maintenance' ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'}">
                                                    ${m.status === 'maintenance' ? 'Locked' : 'Active'}
                                                </span>
                                            </div>
                                            <button class="w-full flex items-center justify-center gap-2 ${m.status === 'maintenance' ? 'bg-green-500' : 'bg-red-500'} text-white py-2 rounded-lg">
                                                ${m.status === 'maintenance' ? 'üîì Unlock' : 'üîí Lock'}
                                            </button>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>

                            <!-- Current Status -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6">
                                <h2 class="text-xl font-bold mb-4 dark:text-white">Current Machine Status</h2>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <h3 class="font-semibold mb-3 dark:text-white">Washers</h3>
                                        <div class="space-y-2">
                                            ${machines.filter(m => m.type === 'washer').map(m => `
                                                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
                                                    <div class="flex justify-between items-center">
                                                        <span class="font-medium dark:text-white">${m.id}</span>
                                                        <span class="px-2 py-1 rounded text-xs ${m.status === 'available' ? 'bg-green-100 text-green-800' : m.status === 'maintenance' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}">
                                                            ${m.status}
                                                        </span>
                                                    </div>
                                                    ${m.status === 'in-use' ? `<div class="mt-2 text-sm text-gray-600 dark:text-gray-400">User: ${m.user}</div>` : ''}
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold mb-3 dark:text-white">Dryers</h3>
                                        <div class="space-y-2">
                                            ${machines.filter(m => m.type === 'dryer').map(m => `
                                                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
                                                    <div class="flex justify-between items-center">
                                                        <span class="font-medium dark:text-white">${m.id}</span>
                                                        <span class="px-2 py-1 rounded text-xs ${m.status === 'available' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
                                                            ${m.status}
                                                        </span>
                                                    </div>
                                                    ${m.status === 'in-use' ? `<div class="mt-2 text-sm text-gray-600 dark:text-gray-400">User: ${m.user}</div>` : ''}
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Usage History -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h2 class="text-xl font-bold dark:text-white">Usage History</h2>
                                    <button class="flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700">
                                        üì• Download CSV
                                    </button>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full">
                                        <thead class="bg-gray-50 dark:bg-gray-700">
                                            <tr>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Date</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Student ID</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Machine</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Spending</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Status</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                            ${usageHistory.map(h => `
                                                <tr>
                                                    <td class="px-4 py-3 whitespace-nowrap text-sm dark:text-white">${h.date}</td>
                                                    <td class="px-4 py-3 whitespace-nowrap text-sm dark:text-white">${h.studentId}</td>
                                                    <td class="px-4 py-3 whitespace-nowrap text-sm dark:text-white">${h.machineId}</td>
                                                    <td class="px-4 py-3 whitespace-nowrap text-sm dark:text-white">RM ${h.spending}</td>
                                                    <td class="px-4 py-3 whitespace-nowrap">
                                                        <span class="px-2 py-1 rounded-full text-xs bg-green-100 text-green-800">${h.status}</span>
                                                    </td>
                                                </tr>
                                            `).join('')}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </main>
                    </div>
                </div>
            `;
        }

        // Event handlers
        function handleLogin() {
            currentUser = { studentId: 'DEMO001' };
            currentView = 'dashboard';
            render();
        }

        function handleAdminLogin() {
            currentView = 'admin';
            render();
        }

        function handleLogout() {
            currentUser = null;
            currentView = 'login';
            activeTab = 'machines';
            render();
        }

        function toggleTheme() {
            isDark = !isDark;
            render();
        }

        function setActiveTab(tab) {
            activeTab = tab;
            render();
        }

        function attachEventListeners() {
            window.handleLogin = handleLogin;
            window.handleAdminLogin = handleAdminLogin;
            window.handleLogout = handleLogout;
            window.toggleTheme = toggleTheme;
            window.setActiveTab = setActiveTab;
        }

        // Initial render
        render();
    </script>
</body>
</html>
